(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{368:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(12),o=n.n(r),i=n(14),s=n(17),u="GET_CURRENT_LOCATION",j="GET_CURRENT_WEATHER",l="GET_FIVE_DAYS_FORECAST",b="ADD_TO_FAVORITE_LIST",d="REMOVE_FROM_FAVORITE_LIST",p="NAVIGATE_TO_FAVORITE_SCREEN",O="NAVIGATE_TO_HOME_SCREEN",f=function(e){return{type:b,payload:e}},h=function(e){return{type:d,payload:e}},x=n(15),v=n(252),y=n(410),g=n(414),m=n(411),E=n(248),w=n.n(E),T=n(81),S=n.n(T),R=n(413),C=n(402),I=n(398),F=n(399),L=n(400),_=n(401),k=n(396),A=n(239),N=n.n(A),W=n(4),D=function(e){var t=e.isFavorite,n=e.onToggle,r=a.a.useState(t),o=Object(i.a)(r,2),s=o[0],u=o[1];Object(c.useEffect)((function(){u(t)}),[t]);return Object(W.jsx)(R.a,{style:{marginLeft:24},children:Object(W.jsx)(k.a,{value:"check",selected:s,onChange:function(e){e.stopPropagation(),u(!s),n(s)},children:s?Object(W.jsx)(S.a,{color:"secondary"}):Object(W.jsx)(N.a,{})})})},M=function(e){return{type:O,payload:e}},V=function(e){var t=e.item,n=e.isFavorite,a=e.onToggle,r=Object(c.useState)(!1),o=Object(i.a)(r,2),u=o[0],j=o[1],l=Object(s.b)();Object(c.useEffect)((function(){j(!0)}),[t]);var b=function(){return Object(W.jsxs)(R.a,{children:[Object(W.jsx)(R.a,{display:"flex",justifyContent:"center",m:1,p:1,children:Object(W.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(t.icon<10?"0":"").concat(t.icon,"-s.png")})}),Object(W.jsx)(R.a,{display:"flex",justifyContent:"center",children:Object(W.jsx)(I.a,{noWrap:!0,variant:"body2",component:"span",children:t.weatherText})})]})};return Object(W.jsx)(F.a,{item:!0,children:Object(W.jsx)(L.a,{style:{minWidth:140},children:Object(W.jsxs)(_.a,{disabled:!0,onClick:function(){n&&l(M(t.title))},style:{cursor:n?"pointer":null},children:[Object(W.jsxs)(R.a,{display:"flex",flexDirection:"row",children:[Object(W.jsxs)(R.a,{flexGrow:1,children:[Object(W.jsx)(R.a,{children:Object(W.jsx)(I.a,{variant:"h6",component:"span",children:t.title})}),Object(W.jsx)(I.a,{variant:"body1",component:"span",children:t.temperature})]}),n&&Object(W.jsx)(D,{isFavorite:!0,onToggle:function(){return a(t.id)}})]}),Object(W.jsx)(R.a,{display:"flex",justifyContent:"center",children:u?Object(W.jsx)(b,{}):Object(W.jsx)(C.a,{})})]})})},t.id)},G=n(403),q=n(118),z=Object(G.a)((function(e){return{root:{},paper:{padding:"12px 12px 24px 24px"},control:{padding:e.spacing(2)}}})),P=function(e){var t=e.currentWeather,n=e.fiveDaysForecast,a=z(),r=Object(c.useState)(!1),o=Object(i.a)(r,2),u=o[0],j=o[1],l=Object(s.b)();Object(c.useEffect)((function(){b()}),[]);var b=function(){localStorage.getItem(t.id)&&j(!0)};return Object(W.jsxs)(q.a,{variant:"outlined",className:a.paper,children:[Object(W.jsxs)(R.a,{component:"span",display:"flex",style:{padding:"24px 24px 48px 0px"},children:[Object(W.jsx)(R.a,{children:Object(W.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(t.icon<10?"0":"").concat(t.icon,"-s.png")})}),Object(W.jsxs)(R.a,{flexGrow:1,children:[Object(W.jsx)(I.a,{variant:"h5",component:"h2",children:t.title}),Object(W.jsx)(I.a,{variant:"body1",component:"span",children:t.weatherText}),Object(W.jsx)(I.a,{variant:"h4",component:"h2",color:"primary",children:t.temperature})]}),Object(W.jsx)(D,{isFavorite:u,onToggle:function(){j(!u),l(u?h(t.id):f(t))}})]}),Object(W.jsx)(F.a,{container:!0,className:a.root,spacing:3,children:n.map((function(e){return Object(W.jsx)(V,{item:e,isFavorite:!1,onToggle:function(){}},e.id)}))})]})},B="CTvqzboUhFkWloAQFRIBufFllAiQv8uc",J="tel aviv",K="light",U="dark",H="oops something went wrong...",Q=n(240),Y=n.n(Q),X=n(30),Z=n.n(X),$=n(59),ee=n(85),te=n.n(ee),ne=n(31),ce=function(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",te.a.get("https://dataservice.accuweather.com/locations/v1/cities/search?apikey=".concat(B,"&q=").concat(e)).then((function(e){e.data[0]?n({type:u,payload:e.data[0]}):Object(ne.a)("Location not found")})).catch((function(e){e.response?Object(ne.a)(H+"\n"+e.response):e.request&&Object(ne.a)(H)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ae=n(407),re=n(415),oe=n(241),ie=n.n(oe),se=n(242),ue=n.n(se),je=function(e){var t=e.setLocation,n=Object(c.useState)(!1),r=Object(i.a)(n,2),o=r[0],s=r[1],u=Object(c.useState)([]),j=Object(i.a)(u,2),l=j[0],b=j[1],d=Object(c.useState)(""),p=Object(i.a)(d,2),O=p[0],f=p[1],h=o&&0===l.length,v=function(){t(O.toLowerCase())},y=function(e){var t=e.target.value;g(t)?(s(!!t),f(t)):Object(ne.a)("Please search in English only",2e3)},g=function(e){if(!e.length)return!0;var t=e.replace(/\s/g,"");return ue.a.isAlpha(t)};Object(c.useEffect)((function(){var e=!0;if(h)return Object($.a)(Z.a.mark((function t(){var n,c;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie()("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(B,"&q=").concat(O));case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,e&&b(Object.keys(c).map((function(e){return c[e]})));case 7:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[h]),Object(c.useEffect)((function(){o||b([])}),[o]);return Object(W.jsx)(re.a,{open:o,onClose:function(){f(""),s(!1)},onChange:function(e,n){t(n.LocalizedName.toLowerCase())},getOptionSelected:function(e,t){return e.LocalizedName===t.LocalizedName},getOptionLabel:function(e){return e.LocalizedName},options:l,loading:h,renderInput:function(e){return Object(W.jsx)("form",{onSubmit:v,children:Object(W.jsx)(ae.a,Object(x.a)(Object(x.a)({onChange:y},e),{},{label:"Search...",variant:"outlined",InputProps:Object(x.a)(Object(x.a)({},e.InputProps),{},{endAdornment:Object(W.jsxs)(a.a.Fragment,{children:[h?Object(W.jsx)(C.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))})}})},le=function(e){var t=e.defaultLocation,n=Object(s.c)((function(e){return e.apiReducer})).currentLocationResponse,a=Object(s.c)((function(e){return e.apiReducer})).currentWeatherResponse,r=Object(s.c)((function(e){return e.apiReducer})).fiveDaysForecastResponse,o=Object(c.useState)({}),u=Object(i.a)(o,2),b=u[0],d=u[1],p=Object(c.useState)({}),O=Object(i.a)(p,2),f=O[0],h=O[1],x=Object(c.useState)(!1),v=Object(i.a)(x,2),y=v[0],g=v[1],m=Object(c.useState)(!1),E=Object(i.a)(m,2),w=E[0],T=E[1],S=Object(c.useState)(t),I=Object(i.a)(S,2),F=I[0],L=I[1],_=Object(s.b)();Object(c.useEffect)((function(){_(M(F)),_(ce(t))}),[]),Object(c.useEffect)((function(){var e;void 0!==n&&0!==n.length&&(_((e=n.Key,function(){var t=Object($.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",te.a.get("https://dataservice.accuweather.com/currentconditions/v1/".concat(e,"?apikey=").concat(B)).then((function(e){n({type:j,payload:e.data[0]})})).catch((function(e){e.response?Object(ne.a)(H+"\n"+e.response):e.request&&Object(ne.a)(H)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),_(function(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",te.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(e,"?apikey=").concat(B)).then((function(e){n({type:l,payload:e.data.DailyForecasts})})).catch((function(e){e.response?Object(ne.a)(H+"\n"+e.response):e.request&&Object(ne.a)(H)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n.Key)))}),[n]),Object(c.useEffect)((function(){void 0!==a&&0!==a.length&&k()}),[a]),Object(c.useEffect)((function(){void 0!==r&&0!==r.length&&A()}),[r]),Object(c.useEffect)((function(){_(ce(F))}),[F]);var k=function(){var e={id:n.Key,title:n.EnglishName,temperature:a.Temperature.Metric.Value+"C\xb0",icon:a.WeatherIcon,weatherText:a.WeatherText};d(e),g(!0)},A=function(){var e=[];for(var t in r)e.push({id:t,title:D(r[t].Date),temperature:N(r[t].Temperature.Maximum.Value),icon:r[t].Day.Icon,weatherText:r[t].Day.IconPhrase});h(e),g(!0),T(!0)},N=function(e){var t=5*(e-32)/9;return Math.ceil(Math.round(10*t)/10)+"C\xb0"},D=function(e){return Y()(e).format("dddd").substring(0,3)},V=function(){return Object(W.jsxs)(R.a,{children:[Object(W.jsx)(R.a,{style:{marginBottom:24},children:Object(W.jsx)(je,{setLocation:function(e){return L(e)}})}),Object(W.jsx)(P,{currentWeather:b,fiveDaysForecast:f})]})},G=function(){return Object(W.jsx)("div",{display:"flex",children:Object(W.jsx)(C.a,{})})};return y&&w?Object(W.jsx)(V,{}):Object(W.jsx)(G,{})},be=function(){var e=Object(s.c)((function(e){return e.favoritesReducer})),t=Object(c.useState)(e),n=Object(i.a)(t,2),a=n[0],r=n[1],o=Object(s.b)();return Object(c.useEffect)((function(){o({type:p})}),[]),Object(c.useEffect)((function(){r(e)}),[e]),Object(W.jsx)(F.a,{container:!0,spacing:3,children:a.map((function(e){return Object(W.jsx)(V,{item:e,isFavorite:!0,onToggle:function(e){return o(h(e))}},e.id)}))})},de=n(409),pe=n(246),Oe=n.n(pe),fe=n(247),he=n.n(fe),xe=n(32),ve=n(406);function ye(e){var t=e.children,n=e.value,c=e.index,a=Object(v.a)(e,["children","value","index"]);return Object(W.jsx)("div",Object(x.a)(Object(x.a)({role:"tabpanel",hidden:n!==c,id:"scrollable-prevent-tabpanel-".concat(c),"aria-labelledby":"scrollable-prevent-tab-".concat(c)},a),{},{children:n===c&&Object(W.jsx)(R.a,{p:3,children:Object(W.jsx)(I.a,{component:"span",children:t})})}))}function ge(e){return{id:"scrollable-prevent-tab-".concat(e),"aria-controls":"scrollable-prevent-tabpanel-".concat(e)}}var me=function(e){var t=e.theme,n=e.setSelectedTheme,r=Object(s.c)((function(e){return e.navigateReducer})),o=a.a.useState(0),u=Object(i.a)(o,2),j=u[0],l=u[1],b=a.a.useState(J),d=Object(i.a)(b,2),p=d[0],O=d[1];Object(c.useEffect)((function(){j&&!r.navigationIndex&&(O(r.defaultWeatherCountry),l(0))}),[r]);var f=t===K?Object(W.jsx)(Oe.a,{}):Object(W.jsx)(he.a,{});return Object(W.jsxs)(a.a.Fragment,{children:[Object(W.jsx)(de.a,{}),Object(W.jsx)(y.a,{position:"static",style:t===U?{backgroundColor:"#303030"}:{backgroundColor:xe.a.primary},children:Object(W.jsxs)(R.a,{display:"flex",children:[Object(W.jsx)(R.a,{flexGrow:1,children:Object(W.jsxs)(g.a,{value:j,onChange:function(e,t){l(t)},variant:"scrollable",scrollButtons:"off","aria-label":"scrollable prevent tabs example",children:[Object(W.jsx)(m.a,Object(x.a)({icon:Object(W.jsx)(w.a,{}),"aria-label":"home"},ge(0))),Object(W.jsx)(m.a,Object(x.a)({icon:Object(W.jsx)(S.a,{}),"aria-label":"favorite"},ge(1)))]})}),Object(W.jsx)(R.a,{style:{paddingRight:24},children:Object(W.jsx)(ve.a,{style:{color:"white"},onClick:function(){n(t===K?U:K)},children:f})})]})}),Object(W.jsx)(ye,{value:j,index:0,children:Object(W.jsx)(le,{defaultLocation:p})}),Object(W.jsx)(ye,{value:j,index:1,children:Object(W.jsx)(be,{})})]})},Ee=n(251),we=n(412),Te=function(){var e=Object(c.useState)(K),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(s.b)(),u=a.a.useMemo((function(){return Object(Ee.a)({palette:{type:n}})}),[n]);return Object(c.useEffect)((function(){for(var e=0,t=Object.entries(localStorage);e<t.length;e++){var n=Object(i.a)(t[e],2)[1];o(f(JSON.parse(n)))}}),[]),Object(W.jsxs)(we.a,{theme:u,children:[Object(W.jsx)(de.a,{}),Object(W.jsx)(me,{theme:n,setSelectedTheme:r})]})},Se=n(249),Re=n(35),Ce=n(250),Ie=[],Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return-1===e.indexOf(t.payload)&&e.push(t.payload),localStorage.setItem(t.payload.id,JSON.stringify(t.payload)),e;case d:var n=e.filter((function(e){return e.id!==t.payload}));return e=n,localStorage.removeItem(t.payload),e;default:return e}},Le={currentLocationResponse:[],currentWeatherResponse:[],fiveDaysForecastResponse:[]},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(x.a)(Object(x.a)({},e),{},{currentLocationResponse:t.payload});case j:return Object(x.a)(Object(x.a)({},e),{},{currentWeatherResponse:t.payload});case l:return Object(x.a)(Object(x.a)({},e),{},{fiveDaysForecastResponse:t.payload});default:return e}},ke={navigationIndex:0,defaultWeatherCountry:J},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(x.a)(Object(x.a)({},e),{},{navigationIndex:0,defaultWeatherCountry:t.payload});case p:return Object(x.a)(Object(x.a)({},e),{},{navigationIndex:1});default:return e}},Ne=Object(Re.combineReducers)({favoritesReducer:Fe,apiReducer:_e,navigateReducer:Ae}),We=[Ce.a],De=Object(Re.createStore)(Ne,{},Object(Se.composeWithDevTools)(Re.applyMiddleware.apply(void 0,We)));o.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(s.a,{store:De,children:Object(W.jsx)(Te,{})})}),document.getElementById("root"))}},[[368,1,2]]]);
//# sourceMappingURL=main.09d0aae5.chunk.js.map